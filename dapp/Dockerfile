FROM node:10.21.0-buster

WORKDIR /usr/src/app

#Rather than copying the entire working directory, we are only copying the package.json file. 
#This allows us to take advantage of cached Docker layers
ADD app/package*.json ./

RUN npm install

ADD app .

####

ADD efem-dapp /home/efem-dapp
RUN cd /home/efem-dapp && npm install && yarn link && cd /usr/src/app && yarn link "@acdi/efem-dapp"


#ADD efem-dapp /home/efem-dapp
#RUN cd /home/efem-dapp
#RUN cd /home/efem-dapp && npm install && yarn link && cd /usr/src/app && yarn link "@acdi/efem-dapp"
#RUN npm install
#RUN yarn link
#RUN cd /usr/src/app
#RUN yarn link "@acdi/efem-dapp"

####

#La configuraci√≥n se va a establecer haciendo uso de un bind mount
#ADD config/configuration.js src

EXPOSE 3010

CMD ["npm","start"]

